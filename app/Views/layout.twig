<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>{{ title ?? app_name }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Libre+Franklin:wght@400;500;700&family=Rouge+Script&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ base }}/assets/favicon-32.png">

  <link rel="stylesheet" href="{{ base }}/assets/app.css">
</head>
<body style="font-family: system-ui, sans-serif; line-height:1.6;">
  <header class="site-header" x-data="{ open:false }" @keydown.escape.window="open=false">
  <div class="container">
    <nav class="topnav">
      <!-- Burger (mobile uniquement) -->
      <button class="nav-burger" aria-label="Ouvrir le menu"
              :aria-expanded="open ? 'true' : 'false'"
              @click="open = !open">
        <!-- hamburger -->
        <svg x-show="!open" xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M3 6h18M3 12h18M3 18h18"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
        </svg>

        <!-- close -->
        <svg x-show="open" x-cloak xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M6 6l12 12M6 18L18 6"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
        </svg>

      </button>

      <!-- Liens desktop (gauche) -->
      <div class="nav-left">
        <a href="{{ base }}/">Accueil</a>
        <a href="{{ base }}/recipes">Recettes</a>
        <a href="{{ base }}/about">À propos</a>
      </div>

      <!-- Logo centré -->
      <a href="{{ base }}/" class="nav-logo" aria-label="Accueil — Les Délices de Kelly">
        <img src="{{ base }}/assets/logo.png" alt="Les Délices de Kelly">
      </a>

      <!-- Zone droite (desktop) -->
      <div class="nav-right">
        {% if auth_user %}
          {% if auth_user and auth_user.role == 'admin' %}
            <a href="{{ base }}/admin">Admin</a>
          {% endif %}

          <span class="nav-hello">Bonjour, <strong>{{ auth_user.name }}</strong></span>
          <form method="post" action="{{ base }}/logout" style="display:inline;">
            <input type="hidden" name="_csrf" value="{{ csrf }}">
            <button type="submit" class="linklike">Déconnexion</button>
          </form>
        {% else %}
          <a href="{{ base }}/login">Se connecter</a>
          <a href="{{ base }}/register" class="btn btn-solid">Créer un compte</a>
        {% endif %}
      </div>
    </nav>

    <!-- Menu déroulant mobile -->
    <div class="mobile-menu" x-show="open" x-transition.origin.top x-cloak>
      <div class="mobile-menu__inner">
        <a href="{{ base }}/">Accueil</a>
        <a href="{{ base }}/recipes">Recettes</a>
        <a href="{{ base }}/about">À propos</a>
        <hr>
        {% if auth_user %}
          <span class="nav-hello">Bonjour, <strong>{{ auth_user.name }}</strong></span>
          <form method="post" action="{{ base }}/logout">
            <input type="hidden" name="_csrf" value="{{ csrf }}">
            <button type="submit" class="btn btn-solid" style="width:100%;">Déconnexion</button>
          </form>
        {% else %}
          <a href="{{ base }}/login">Se connecter</a>
          <a href="{{ base }}/register" class="btn btn-solid" style="width:100%; text-align:center;">Créer un compte</a>
        {% endif %}
      </div>
    </div>
    </div>
  </header>


  <main class="site-main">
  <div class="container">
    {% if flash_ok %}
      <div class="alert alert-ok">{{ flash_ok }}</div>
    {% endif %}
    {% if flash_err %}
      <div class="alert alert-err">{{ flash_err }}</div>
    {% endif %}
  </div>

    {% block content %}{% endblock %}
  </main>

  <footer style="margin-top:24px; padding:16px 0; border-top:1px solid var(--border); background:var(--surface);">
    <div class="container footer-grid">
      <nav class="footer-links">
        <a href="{{ base }}/mentions-legales">Mentions légales</a>
        <a href="{{ base }}/politique-de-confidentialite">Confidentialité</a>
        <a href="{{ base }}/cookies">Cookies</a>
      </nav>

      <div class="footer-contact">
        <span>Me contacter :</span>

        <!-- Email -->
        <a class="icon-link"
          href="mailto:guillaumeagard.dev@gmail.com?subject=Contact%20Les%20D%C3%A9lices%20de%20Kelly"
          aria-label="Envoyer un email">
          <!-- Icône enveloppe -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M4 6h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z"/>
            <path d="m22 8-10 7L2 8"/>
          </svg>
        </a>

        <!-- Instagram -->
        <a class="icon-link"
          href="#"
          target="_blank" rel="noopener noreferrer"
          aria-label="Instagram - Les Délices de Kelly">
          <!-- Icône Instagram -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="3" y="3" width="18" height="18" rx="5" ry="5"/>
            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
          </svg>
        </a>
      </div>
    </div>
  </footer>


</body>
</html>
