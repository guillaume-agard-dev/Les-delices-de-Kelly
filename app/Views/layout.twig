<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>{{ title ?? app_name }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Libre+Franklin:wght@400;500;700&family=Rouge+Script&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ base }}/assets/favicon-32.png">

  <link rel="stylesheet" href="{{ base }}/assets/app.css">
</head>
<body style="font-family: system-ui, sans-serif; line-height:1.6;">
  <header class="site-header" x-data="{ open:false }" @keydown.escape.window="open=false">
  <div class="container">
    <nav class="topnav">
      <!-- Burger (mobile uniquement) -->
      <button class="nav-burger" aria-label="Ouvrir le menu"
              :aria-expanded="open ? 'true' : 'false'"
              @click="open = !open">
        <!-- hamburger -->
        <svg x-show="!open" xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M3 6h18M3 12h18M3 18h18"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
        </svg>

        <!-- close -->
        <svg x-show="open" x-cloak xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M6 6l12 12M6 18L18 6"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
        </svg>

      </button>

      <!-- Liens desktop (gauche) -->
      <div class="nav-left">
        <a href="{{ base }}/">Accueil</a>
        <a href="{{ base }}/recipes">Recettes</a>
        <a href="{{ base }}/about">À propos</a>
      </div>

      <!-- Logo centré -->
      <a href="{{ base }}/" class="nav-logo" aria-label="Accueil — Les Délices de Kelly">
        <img src="{{ base }}/assets/logo.png" alt="Les Délices de Kelly">
      </a>

      <!-- Zone droite (desktop) -->
      <div class="nav-right">
        {% if auth_user %}
          <span class="nav-hello">Bonjour, <strong>{{ auth_user.name }}</strong></span>
          <form method="post" action="{{ base }}/logout" style="display:inline;">
            <input type="hidden" name="_csrf" value="{{ csrf }}">
            <button type="submit" class="linklike">Déconnexion</button>
          </form>
        {% else %}
          <a href="{{ base }}/login">Se connecter</a>
          <a href="{{ base }}/register" class="btn btn-solid">Créer un compte</a>
        {% endif %}
      </div>
    </nav>

    <!-- Menu déroulant mobile -->
    <div class="mobile-menu" x-show="open" x-transition.origin.top x-cloak>
      <div class="mobile-menu__inner">
        <a href="{{ base }}/">Accueil</a>
        <a href="{{ base }}/recipes">Recettes</a>
        <a href="{{ base }}/about">À propos</a>
        <hr>
        {% if auth_user %}
          <span class="nav-hello">Bonjour, <strong>{{ auth_user.name }}</strong></span>
          <form method="post" action="{{ base }}/logout">
            <input type="hidden" name="_csrf" value="{{ csrf }}">
            <button type="submit" class="btn btn-solid" style="width:100%;">Déconnexion</button>
          </form>
        {% else %}
          <a href="{{ base }}/login">Se connecter</a>
          <a href="{{ base }}/register" class="btn btn-solid" style="width:100%; text-align:center;">Créer un compte</a>
        {% endif %}
      </div>
    </div>
    </div>
  </header>


  <main>
  <div class="container">
    {% if flash_ok %}
      <div class="alert alert-ok">{{ flash_ok }}</div>
    {% endif %}
    {% if flash_err %}
      <div class="alert alert-err">{{ flash_err }}</div>
    {% endif %}
  </div>

    {% block content %}{% endblock %}
  </main>


  <footer>
    <div class="container"><hr>© {{ "now"|date("Y") }} — Mentions légales</div>
  </footer>
</body>
</html>
